package com.bdv.gestiondefirmas.desplieguedecuentas.controllers;


import com.bdv.gestiondefirmas.desplieguedecuentas.models.entities.*;
import com.bdv.gestiondefirmas.desplieguedecuentas.services.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;

@RestController
@RequestMapping("app")
public class CuentaController {

    @Autowired
    private ICuentaService cuentaService;


    @Autowired
    private ITelefonoService telefonoService;


    @Autowired
    private ISellosService sellosService;

    @Autowired
    private ISelloService selloService;


    @Autowired
    private ICondicionesService condicionesService;


    @Autowired
    private IFirmanteService firmanteService;

    @Autowired
    private IFirmaService firmaService;


    @Autowired
    private IPersonaService personaService;


    @Autowired
    private IAtributosCuentaService atributosCuentaService;



    @GetMapping("getCuenta")
    public ResponseEntity<Cuenta> verCuenta(@RequestParam String idCuenta) {
        Optional<Cuenta> o = cuentaService.findById(idCuenta);
        if (o.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok(o.get());
    }

    @GetMapping("getTelefonos")
    public ResponseEntity<Telefono> verTelefonos(@RequestParam String idPersona) {
        Optional<Telefono> o = telefonoService.findByIdPersona(idPersona);
        if (o.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok(o.get());
    }

    @GetMapping("getSellos")
    public ResponseEntity<?> verSellos(@RequestParam String idCuenta) {
        List<Optional<Sellos>> o = sellosService.findByIdCuenta(idCuenta);
        if (o.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok().body(o);
    }


    @GetMapping("getSello")
    public ResponseEntity<?> verSello(@RequestParam Long idImagen) {
       // Sello o = selloService.findByIdImagen(idImagen);

        Sello o=new Sello();

        o.setIdTipoImagen(2);
        o.setIdImagen(1845341L);
        o.setLongitud(3800);
        String img2="0x49492A00080000001200FE00040001000000000000000001030001000000750100000101030001000000060100000201030001000000010000000301030001000000040000000601030001000000000000000A01030001000000020000001101040001000000E60100001201030001000000010000001501030001000000010000001601040001000000060100001701040001000000F00C00001A01050001000000E60000001B01050001000000EE0000001C01030001000000010000002801030001000000020000003201020014000000F60000003B010200260000001E01000000000000C600000001000000C60000000100000031312D32342D31393932000000000000000000000000000000000000000000000000000000000000313939322041434355534F465420494E432C20414C4C20524947485453205245534552564544000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DC7284405157A9F421CD44F9A5F192E4C9CD4590547310C89274E22050BE481F22B9F60A852C4B2AE908A9240882A4A77008CA2C095249DE444E12644812547AD910A412040982A425100A0A418224E9994310D116044925417A2108322409E20B8224083A4290044982102441BA20C882204192200A872E08228545E3104820081284D02108925116044910C4AD10CB74317408822088E39020082A90402004510F3285F3045E82240842E4812008824054155DC4C5107131C462C61034F1892792479BB8E813F7432088014648024154D631A2449F2E881331C417848808119F78C4FD82108412042294883F86384B88C82C8520442E3012D95247324E7848024120D08E90E8426421394C3743C4892E2E60BF156249028148BD6408890FA2CEC4819CB8888B04286E90C9700904913247104842243E84884405F8600AC89048404961842044101278280C3E1E2287134D208E432050244C670AA786C2F95038C709969C406CD487040281304CC68B30D3D431474B123DC42C739C3B4C028C4A56A06680132D1E58139FB8881B4A1C84F868B81061C2A2C03D2212661A15E14A724802510E23812160F023222222126C8E300E3E51E38036A83026FE2341A849CF70C2348E48705732802186C320244840608EF3A78F6ED6FC29E7476E76E4A09CC69F0860304C6A1B09030779D96D59A3772922E9280B0841457CE213171DE69D0B3024A82044E2C2F59E93E6F83685270A0A1B111135F119C0E00409A25DC411E210CA0B1F44BC866AC8DE2E752E269D58205E4818550904811051BB961D216FFFD58361A2073FA1E4128484390E11DFFF6BC16FAC2A86C360180C1F5582381E0DB3DBB0EF7F6FED05CE098661F84B10121651C3ED2AB4A9F04176C902AB2D3071C18404CCD64B8240C4EFD5BE92BD6CAF6F05D1F76318398EF01704E105BF610CD98E97242F9E39D7B983889FE30DA25FF98A82080A7C440D27BEE55FE870D55744F4E8A30411045725C4BB30141111F15A3AC791E1B60F0D227E0711BFF1425B4B30D707636989D0813AC39DE3EA0C0F16E21AAC2704F7250802411AB10BDB182EB1FE9937C3E1974090E0C9F82A88C21B229E3BAEC7F625481008438888888892240B198EF04B907840167755D8CB0C9789384C5CF488AF15122444D8062F09421832221236980B8220933E5D6A5748B0E13559C1862EE2312408821C67C78DD750C1B0614282C249B8A4111191B0C1C5CD3A04A20B09CF1621421594070CC3B011B1C2441C0934CEF174F61D41208D922CC3B02145A2CC98384C80A9617A6C31EB46B660DB52C4449B2488A111111161E2F0B68985431264EEE62E1127E2D36102C8931568208D20AAA686B35030738E4323121441D4194EA1668C452421DB882CF366336166A3ECD9260E498CE8A2C30430902D42C69650D9C1868D8811A9C61C6636F199E72A7A0C980006713184E271C376481024081191C862448709982B5DC40551EEAE9222F2C4CD2ABA18138710071E4C8620A810119172133163F67433CC273A2C85246D88782875351C26C6C02589EFD1E209A3641B36215C92B6886BC8392EB1B061DBAE92050221328B498905229E50900CBB0DBB20098E4C344354089DEE922DD8ED2548EDCF1EA56564C8B06D9742888D377B58795876D817A4303BF70885BDDD7E41FC2D86161BC8DD70187697A4C6B8947DE3BE9724C39696C2306CDBBE4A36D6126CD9B65F125F20AA2F498C9C016EDB1D9224B41D96A48221DB1F9272375A5A90120BFEB62F0DC95192864190BDAF8224272E4B0571D4906CAFAA0A41234A1204DB52F74BB2474BD58640EE9724B8C4CD2294C4C2F06ABBAB728685258D8258B2FBA1025178E2B2B9B5A64B50A924DB7E95A0461B46C4920A82BC2F5DB02D6EA6894BA516647B5D7270E24241C853846C89B3F74B423495706AD3C80881B67DA9784212E2A61212222471416EEFAA8229849050C12088ECFD5A82C2881088B8E82324BBED4BC366161407818867FB7D85E1AE0A796F5F8B79185C4C2790A15697FD4B21188EDCA86316A8B6B1ED4B2523A2C576EF7FCDC2DC34A28F0547767FA924AB6D901A64DBFE7A4310123C374610E420FD2F558921AEE2A8A8AC86209888F82515FCD38520089112A1439020DBFF4621A411B1384ECBFF2A706ECA6C09DDEF6B0886054120632604DBDB7F9917333B4AE17DEBAF8C6041E06292507F95CA9290CF514C8AA5F6FB2A88B8660B2C8D2013FCEDAFBB7AE23B5794CEEC43307CD7D715510C971056E40FE641F9ABBB1497402094296738C779686E52D17FD4BB3E39FB293C168E157143FAFE606C042D6237F9B611E4FE1A4C6D8AC4DF1DC51A92D63F4FC4855C248EEB73D72308FA2FC9C4455C7CA147ADA828A8EB7AE150E107713C636EED82F6EADF21122DC7315DF4B969D9C69BB8EE6F30C21E610A07C15FF6C72E5D211439A15051BFBE5C269AB0103F71BD0F9EF8D28FAF4DB92398C2B0C950120EF9BD47E42D105D101987105127AEAA23A2D18F5D9A404A38844A34ABFA6638B5153C40C42D3D5DDD438E050221AC19FAEB610481A446C41B0FADA3888B2EE2BA0E6F53AEF04C945AFF94841842828E3C977D75E76678AE2355540CB7DED621103AA184927C1D7A118FB88AF8882EE6AEFF06810C8B2ECA8FFD0F9FB51161111F0DA986BF4D6241C42508BA20E9FAC54711110B02E3FD37B581283A38C3D375BD1B5946AA45E6CB6A49FFA020105245FFD7CB995D883314EB7A79E58DC358EA7B1BB299A84712E296C814AEEB3D42118311FF4F02071167D53FB32088095D5C469858E8BBDD43200483F53FF24C5CC85FB995ECD26D17A428715390257D6D16D54C4831846154BDBBBE2589395CF5969791096849E2A8C2EB6D8F106FBAD0D0C4F90C97D66FB084991402518108E2460BF7FA3B4AD87278A9A41B22FECA040107C3C6FAE386682F8E13F56157BDE510277892231510284254C058F5B6B56CB860D89274C33548DC2412D14D2DC3FADBF01084A950C125E93742125CC3D73BB8203687B04114577D19244718EEF586E83A04A2708889CFAD6A63A96EB463147D5BF025DD76E28240A38205499FC26D4B98058C92747C8979EA24DA86F4DB1E32B7AA20785FBAC3EE10AA61BBA4871B0E413C850C6BE9ED5121178C25E9B72008E234671852E96D2F81382E238C52DDED0519D52A1DB60D63D9D41724BD6D4BDC33A9844B7ADB2E28DA2A49B7C328F1CCA416E19C54812449B7E182042B6455188224DDB6170B114A742FDB129674DB6E49DF26BE7D49D2ED6E6909368B40BB6D622B3142D26DC328491482208461E42E82D08687C0862149B761AF28B87893E54E76A71DAB2D49B7ED95BCDA29262EF2D882402F08EE7698BF24DDB06D848AA357BE6A41C499B8B84A08BEEC1D44398B2A49B7611B5295B447A42B62D5DEB7E51B0A09D2611BC682A05A42CDBA2C3A5CDF0EEA760912742AEF17AA3FBA84FD0EBBC28E921E04C3704125C510D7E0B5BD17D72C6F49D00D1B56891D7111131D9D42C453C7EF1BDF9620483ADCB01012362E3E342159E53FE9723B8604E9300CDB82E83043C4B0663817B1E52597DB0D09929EE3B0ADEB580281D441C4E36B37ACC84A6E37C45749876D4B51220119F7EC846F94DCDB0809826EC3B6C4F092A438326FF3DF02B5ED862041370C83B1C0CA873A0A38C323B3AEA658F61D82201DB63DEA50C99E3E45C4054D084E4D24A22C6E9724DD36DC43128C1EC147395A8430E4DB568404E9300C8683A5C53D23E2C2C11DFB3D1608826E88B89BAB16B42D344194C22912E561BB432041BAA102C328C997219E58848841BD3D0C1224E808A56FB04BC270C8C405F9E8688420E946C3309EE3921EB95BC1E51004820EC3603FB88664B6385256361C64E6419040E7CE4C5C86719424548189FE3C436D678C0A4110C3211D61309C14529C59147A3988F2A2408204C21EE638D8E092662EE506814106516EDEF77B412041471B0CA3E0626FA12F4330F14146311F3C0C210482400F9B48ED5135F71AB5BB4D4E08124837C361304CCCF26CBC9BC70CB798A75807DB211004D2E0C487613471575DBA7CBBDCE14144A0207983400883C19694874A7B3DEE6586240409828E096D305DF8D7D597DB5DB12008D26088786010F1BA62AC6BCFC1D8414407E48D824120249133B257D74782111088BBA50D1317820951CBD2A83E4C17852C1004417830920F462C8F0E23520165C3F030C7453C308583D1CA71081669E082341AC1C88120228AA8431C1837310E0613BA912897093A0E9D9B1A06339431B71C7410C137FA304C5C2C6070B7E86080A0732BC1208741174354162321A14507130C1891849357EAA8E33885239208D0B9B540888BB8484C1C6C893B22119C3B4510E638E8DC4C089AB82610DE0802099123E260470F364470A7245470E74FD191406CCDB9A104968BE851B494D338D90982539B694498C239DE081367E2A21A5C28F48830885C74B0200EEB1A4DE1DC912038A14E3B95E01145D48906B2A0927A98C221531EE638855338DD54421911D111118FFFFFFFFFC90A2A4F9890739C6A4A473A221278109C186738857367C3B7E644175D74D1451C210EDAA0139F5C6C1D1111B95D2C30094B476E244C1C263E00022000020000";

        String im2=(img2).substring(2);

        byte[] ans = new byte[im2.length() / 2];
        for (int i = 0; i < ans.length; i++)
        {
            int index = i * 2;
            // Using parseInt() method of Integer class
            int val = Integer.parseInt(im2.substring(index, index + 2), 16);
            ans[i] = (byte)val;
        }

        byte[] im4=ans;

        o.setImagen(im4);


        if (o==null) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok().body(o);
    }

    @GetMapping("getCondiciones")
    public ResponseEntity<?> verCondiciones(@RequestParam String idCuenta) {
        Optional<Condiciones> o = condicionesService.findByIdCuenta(idCuenta);
        if (o.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok().body(o);
    }


    @GetMapping("getFirmantes")
    public ResponseEntity<?> verFirmantes(@RequestParam String idCuenta) {
        List<Optional<Firmante>> o = firmanteService.findByIdCuenta(idCuenta);
        if (o.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok().body(o);
    }


    @GetMapping("getImagenfirma")
    public ResponseEntity<?> verFirma(@RequestParam Long idImagen) {
       // Firma o = firmaService.findByIdImagen(idImagen);

        Firma o=new Firma();

        o.setIdTipoImagen(1);
        o.setIdImagen(1845343L);
        o.setLongitud(1234);
        String img="0x49492A00080000001200FE000400010000000000000000010300010000003A0100000101030001000000770000000201030001000000010000000301030001000000040000000601030001000000000000000A01030001000000020000001101040001000000E60100001201030001000000010000001501030001000000010000001601040001000000770000001701040001000000EA0200001A01050001000000E60000001B01050001000000EE0000001C01030001000000010000002801030001000000020000003201020014000000F60000003B010200260000001E01000000000000C600000001000000C60000000100000031312D32342D31393932000000000000000000000000000000000000000000000000000000000000313939322041434355534F465420494E432C20414C4C20524947485453205245534552564544000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C47FEDF5FFFFFFA75CC7FF6B33091DD7F7DA5FDF5FFFFFFF67C5974F449BCBF6255F0AF34D507ADD8FEB7EF9D6E6A68D5B59DF59ADF25FE65A107191A2D7F3D38E5EFEFFDD7EBED61688BE20E2F51FBA64BD65BD7C1F123E6210F1F6C70CFCBF40C4DF46E8B7BF1709F47F82C8FD66EA3FB3C7FE3F5F5C7577FF9EC42F43601611D3EB9C494C867FDDF60DC12D785F0596592DCAEDBDEF785925E2EA8388BFE020E2B510222E8AE2F5D6A2CF0BD4B574F4CDBE423204BFFFCB6EF6556DBFCBC46B98BA0B93C0EB6D1F5A2DE1AFE48BE0D1BDD087C81E0211A7DB0B0C6D51DE7EFED6F5B98370551611974A12B8D1E7F30BC150F4B541141E8F0A6BC71E1B4B16883E5F97453BC2DF106CDB926F0FB9188204B525B09F37851B44C6C190607210C12D438868A15A0A1B2DB0704B7E93715414C220231282E70AF4D504390481E64E04B7B0DE32044368C270991CC46E111661A3921D79502D44CB30C8C4270EB96D568360524016824107D9968385308446522042EF1111D1302C34D408832C0A90DBB66158682198AE89D186BDCD3A0BF1C688780E7010C7C44517F1898BA747444424F040C7098BAD79244C40F1290D212EE23009EA23726B8838F0403E72AB0A3AC25397EB222C820DDBD3664E723FBB0F9EFBD63FF1FFEF1E7D54ABEE0CFFF12FFCC478B9DD778E5FAF4286E38A2CDCF0EE28DD30222236DC60E2628BAF3022123870D2F3C27518464482A9739C054F352B98001AE23344FCDCD8D1A7C304CC109FF8C48F48A689471C250E1344C2C4C5165B88484CC4C5105D74E0618D1978287131C48D22BA1011B95F24C4005D88041E0C9CE3D4C6392DC580483845CA0F9160E30C6738C739CE73E2E28F0542A49418263E1D2698CEC4C5B92044249298455C6CE0C14C4244C2E21671307160CCA43263445894C02E314149107161107113D76202960402219236C489BB22859B94C3894F175B2C222E8475E6D8B1CD88C7DC5A8328078184360842947E644C5CAB87DC22D44941BC918588A48B3D36A2D0FC71E20E800008800000";

        String im=(img).substring(2);

        byte[] ans = new byte[im.length() / 2];
        for (int i = 0; i < ans.length; i++)
        {
            int index = i * 2;
            // Using parseInt() method of Integer class
            int val = Integer.parseInt(im.substring(index, index + 2), 16);
            ans[i] = (byte)val;
        }

        byte[] im2=ans;

        o.setImagen(im2);

        if (o==null) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok().body(o);
    }


    @GetMapping("getPersona")
    public ResponseEntity<?> verPersona(@RequestParam String idPersona) {
        Optional<Persona> o = personaService.findByIdPersona(idPersona);
        if (o.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok().body(o);
    }


    @GetMapping("getAtributosCuentas")
    public ResponseEntity<?> verAtributos() {

        List<Tipocondicion> tcondiciones=atributosCuentaService.obtenerCondiciones();
        List<Tipocuenta> tcuentas=atributosCuentaService.obtenerTiposDeCuenta();
        List<Tipoimagen> timagen=atributosCuentaService.obtenerTiposDeImagenes();
        List<Tiporegla> tregla=atributosCuentaService.obtenerTiposDeRegla();
        List<Tipotitular> ttitular=atributosCuentaService.obtenerTiposDeTitular();

        Atributocuenta atributocuenta=new Atributocuenta(tcondiciones,tcuentas,timagen,tregla,ttitular);

        return ResponseEntity.ok().body(atributocuenta);
    }




}
